# OMNI Crypto Payments - Docker Environment Configuration
# Use this file when running with Docker Compose

# =============================================================================
# Server Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=debug
API_BASE_URL=http://localhost:3000

# =============================================================================
# Database Configuration (PostgreSQL in Docker)
# =============================================================================
DATABASE_URL=postgresql://omni:development@localhost:5432/omni_payments
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# =============================================================================
# Redis Configuration (Redis in Docker)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=omni:

# =============================================================================
# Bitcoin Configuration (Bitcoin Core regtest in Docker)
# =============================================================================
BITCOIN_RPC_URL=http://localhost:18443
BITCOIN_RPC_USER=bitcoinrpc
BITCOIN_RPC_PASS=bitcoinpass
BITCOIN_ZMQ_ENDPOINT=tcp://127.0.0.1:28332
BITCOIN_NETWORK=regtest
BITCOIN_POLL_INTERVAL_MS=10000
BITCOIN_MAX_RETRY_ATTEMPTS=5

# =============================================================================
# Zcash Configuration (Zcashd testnet in Docker)
# =============================================================================
ZCASH_RPC_URL=http://localhost:18232
ZCASH_RPC_USER=zcashrpc
ZCASH_RPC_PASS=zcashpass
ZCASH_NETWORK=testnet
ZCASH_POLL_INTERVAL_MS=15000
ZCASH_MAX_RETRY_ATTEMPTS=5

# =============================================================================
# Circle API Configuration (Sandbox for testing)
# =============================================================================
# Replace these with your Circle sandbox credentials
# Get sandbox API key from: https://developers.circle.com/
CIRCLE_API_KEY=your_circle_sandbox_api_key_here
CIRCLE_ENTITY_ID=your_circle_entity_id_here
CIRCLE_BASE_URL=https://api-sandbox.circle.com
CIRCLE_API_VERSION=v1
CIRCLE_RATE_LIMIT_PER_SECOND=10

# =============================================================================
# Security Configuration (Development keys - DO NOT USE IN PRODUCTION)
# =============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MASTER_SEED_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
JWT_SECRET=development_jwt_secret_change_in_production
JWT_EXPIRES_IN=7d
API_KEY_SALT_ROUNDS=12
WEBHOOK_SIGNING_SECRET=development_webhook_secret_change_in_production

# =============================================================================
# Application Configuration
# =============================================================================
PAYMENT_EXPIRATION_MINUTES=15
MIN_PAYMENT_AMOUNT_USD=1.0
MAX_PAYMENT_AMOUNT_USD=100000.0
BTC_CONFIRMATION_THRESHOLD=6
ZEC_CONFIRMATION_THRESHOLD=6
SETTLEMENT_SCHEDULE=daily
SETTLEMENT_TIME=00:00
PLATFORM_FEE_PERCENT=2.0
MIN_SETTLEMENT_AMOUNT_USD=10.0

# =============================================================================
# Hot Wallet Configuration
# =============================================================================
HOT_WALLET_MAX_BALANCE_BTC=1.0
HOT_WALLET_MAX_BALANCE_ZEC=50.0
HOT_WALLET_SWEEP_THRESHOLD_BTC=0.5
HOT_WALLET_SWEEP_THRESHOLD_ZEC=25.0

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_CREATE_PAYMENT=100
RATE_LIMIT_GET_PAYMENT=1000

# =============================================================================
# Webhook Configuration
# =============================================================================
WEBHOOK_MAX_RETRY_ATTEMPTS=5
WEBHOOK_RETRY_INITIAL_DELAY_MS=1000
WEBHOOK_RETRY_MAX_DELAY_MS=3600000
WEBHOOK_TIMEOUT_MS=10000

# =============================================================================
# Worker Configuration
# =============================================================================
BITCOIN_MONITOR_ENABLED=true
BITCOIN_MONITOR_CONCURRENCY=5
ZCASH_MONITOR_ENABLED=true
ZCASH_MONITOR_CONCURRENCY=3
CONVERSION_WORKER_ENABLED=true
CONVERSION_WORKER_CONCURRENCY=5
SETTLEMENT_WORKER_ENABLED=true
SETTLEMENT_WORKER_CONCURRENCY=2
WEBHOOK_WORKER_ENABLED=true
WEBHOOK_WORKER_CONCURRENCY=10

# =============================================================================
# Monitoring & Logging Configuration
# =============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d
METRICS_ENABLED=false
METRICS_PORT=9090

# =============================================================================
# Testing & Development Configuration
# =============================================================================
TEST_DATABASE_URL=postgresql://omni:development@localhost:5432/omni_payments_test
TEST_REDIS_URL=redis://localhost:6379/1
DEV_AUTO_CONFIRM_PAYMENTS=false
DEV_MOCK_CIRCLE_API=false
DEV_MOCK_BLOCKCHAIN_RPC=false

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=false

# =============================================================================
# Shopify Integration (Optional)
# =============================================================================
SHOPIFY_APP_ENABLED=false
SHOPIFY_API_KEY=
SHOPIFY_API_SECRET=
SHOPIFY_SCOPES=write_orders,read_products
SHOPIFY_APP_URL=

# =============================================================================
# AWS Configuration (Not needed for Docker development)
# =============================================================================
AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_KMS_KEY_ID=
