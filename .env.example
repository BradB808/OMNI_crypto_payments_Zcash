# ==============================================
# OMNI Crypto Payments - Environment Variables
# ==============================================
# IMPORTANT: Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control

# ==============================================
# Server Configuration
# ==============================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=info
API_BASE_URL=http://localhost:3000

# ==============================================
# Database Configuration
# ==============================================
DATABASE_URL=postgresql://postgres:password@localhost:5432/omni_payments
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_IDLE_TIMEOUT_MS=30000
DATABASE_CONNECTION_TIMEOUT_MS=2000

# ==============================================
# Redis Configuration
# ==============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=omni:

# ==============================================
# Bitcoin Node Configuration
# ==============================================
BITCOIN_RPC_URL=http://localhost:8332
BITCOIN_RPC_USER=bitcoinrpc
BITCOIN_RPC_PASS=your_bitcoin_rpc_password
BITCOIN_ZMQ_ENDPOINT=tcp://127.0.0.1:28332
BITCOIN_NETWORK=testnet

# Bitcoin monitoring settings
BITCOIN_POLL_INTERVAL_MS=10000
BITCOIN_MAX_RETRY_ATTEMPTS=5

# ==============================================
# Zcash Node Configuration
# ==============================================
ZCASH_RPC_URL=http://localhost:8232
ZCASH_RPC_USER=zcashrpc
ZCASH_RPC_PASS=your_zcash_rpc_password
ZCASH_NETWORK=testnet

# Zcash monitoring settings
ZCASH_POLL_INTERVAL_MS=15000
ZCASH_MAX_RETRY_ATTEMPTS=5

# ==============================================
# Circle API Configuration
# ==============================================
CIRCLE_API_KEY=your_circle_api_key_here
CIRCLE_ENTITY_ID=your_circle_entity_id
CIRCLE_BASE_URL=https://api-sandbox.circle.com
CIRCLE_API_VERSION=v1

# Circle rate limiting
CIRCLE_RATE_LIMIT_PER_SECOND=10

# ==============================================
# Security - Encryption & Signing
# ==============================================
# CRITICAL: Generate a secure 32-byte (64 hex chars) encryption key
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MASTER_SEED_ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# JWT configuration
JWT_SECRET=your_jwt_secret_here_minimum_32_chars
JWT_EXPIRES_IN=7d

# API key hashing
API_KEY_SALT_ROUNDS=12

# Webhook signature secret
WEBHOOK_SIGNING_SECRET=your_webhook_signing_secret_minimum_32_chars

# ==============================================
# AWS Configuration (Production Only)
# ==============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_KMS_KEY_ID=

# ==============================================
# Application Configuration
# ==============================================
# Payment settings
PAYMENT_EXPIRATION_MINUTES=15
MIN_PAYMENT_AMOUNT_USD=1.00
MAX_PAYMENT_AMOUNT_USD=100000.00

# Confirmation thresholds
BTC_CONFIRMATION_THRESHOLD=6
ZEC_CONFIRMATION_THRESHOLD=6

# Settlement configuration
SETTLEMENT_SCHEDULE=daily
SETTLEMENT_TIME=00:00
PLATFORM_FEE_PERCENT=2.0
MIN_SETTLEMENT_AMOUNT_USD=10.00

# Hot wallet configuration
HOT_WALLET_MAX_BALANCE_BTC=1.0
HOT_WALLET_MAX_BALANCE_ZEC=50.0
HOT_WALLET_SWEEP_THRESHOLD_BTC=0.5
HOT_WALLET_SWEEP_THRESHOLD_ZEC=25.0

# ==============================================
# Rate Limiting
# ==============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_CREATE_PAYMENT=100
RATE_LIMIT_GET_PAYMENT=1000

# ==============================================
# Webhook Configuration
# ==============================================
WEBHOOK_MAX_RETRY_ATTEMPTS=5
WEBHOOK_RETRY_INITIAL_DELAY_MS=1000
WEBHOOK_RETRY_MAX_DELAY_MS=3600000
WEBHOOK_TIMEOUT_MS=10000

# ==============================================
# Worker Configuration
# ==============================================
# Bitcoin monitor worker
BITCOIN_MONITOR_ENABLED=true
BITCOIN_MONITOR_CONCURRENCY=5

# Zcash monitor worker
ZCASH_MONITOR_ENABLED=true
ZCASH_MONITOR_CONCURRENCY=3

# Conversion worker
CONVERSION_WORKER_ENABLED=true
CONVERSION_WORKER_CONCURRENCY=5

# Settlement worker
SETTLEMENT_WORKER_ENABLED=true
SETTLEMENT_WORKER_CONCURRENCY=2

# Webhook worker
WEBHOOK_WORKER_ENABLED=true
WEBHOOK_WORKER_CONCURRENCY=10

# ==============================================
# Monitoring & Logging
# ==============================================
# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Log configuration
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d

# Metrics
METRICS_ENABLED=false
METRICS_PORT=9090

# ==============================================
# Development & Testing
# ==============================================
# Test configuration
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/omni_payments_test
TEST_REDIS_URL=redis://localhost:6379/1

# Development features
DEV_AUTO_CONFIRM_PAYMENTS=false
DEV_MOCK_CIRCLE_API=false
DEV_MOCK_BLOCKCHAIN_RPC=false

# ==============================================
# CORS Configuration
# ==============================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ==============================================
# Shopify App Configuration (Optional)
# ==============================================
SHOPIFY_APP_ENABLED=false
SHOPIFY_API_KEY=
SHOPIFY_API_SECRET=
SHOPIFY_SCOPES=write_orders,read_products,write_payment_gateways
SHOPIFY_APP_URL=https://app.omni.com
